<!DOCTYPE html>
<!-- Declara que este documento es HTML5 -->
<html lang="es">
<!-- Inicio del documento HTML con idioma español -->

<head>
    <!-- Sección de metadatos y recursos -->
    <meta charset="UTF-8">
    <!-- Define la codificación de caracteres como UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Configura la vista para dispositivos móviles -->
    <title>Registro de Empleado - LABORA</title>
    <!-- Título que aparece en la pestaña del navegador -->
    <link rel="stylesheet" href="../recursos/css/styles.css">
    <link rel="stylesheet" href="../recursos/css/worker-registration.css">
    <!-- Vincula el archivo de estilos CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Importa la fuente Roboto de Google Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Importa los íconos de Font Awesome -->
    
</head>

<body>
    <!-- Cuerpo principal del documento -->
    <div class="header">
        <!-- Encabezado de la página -->
        <h1>LABORA</h1>
        <!-- Título principal -->
        <a href="../index.html">Volver al Inicio</a>
        <!-- Enlace para volver a la página principal -->
    </div>

    <div class="form-section">
        <!-- Sección del formulario de registro -->
        <h2>Registro de Empleado</h2>
        <!-- Título del formulario -->

        <form action="../funciones/worker-register.php" method="POST" onsubmit="return validateForm()">
            <!-- Formulario con validación -->
            <div class="input-group">
                <!-- Grupo de campo de entrada para nombre -->
                <label for="emp-nombre">Nombre Completo</label>
                <!-- Etiqueta del campo -->
                <input type="text" id="emp-nombre" name="nombre" required>
                <!-- Campo de entrada para nombre -->
            </div>

            <div class="input-group">
                <label for="emp-dni">DNI</label>
                <input type="text" id="emp-dni" name="dni" required pattern="[0-9]{8}" title="Ingrese un DNI válido de 8 dígitos">
            </div>

            <div class="input-group">
                <label for="emp-nacionalidad">Nacionalidad</label>
                <input type="text" id="emp-nacionalidad" name="nacionalidad" required>
            </div>

            <div class="input-group">
                <label for="emp-fecha-nacimiento">Fecha de Nacimiento</label>
                <input type="date" id="emp-fecha-nacimiento" name="fecha-nacimiento" required>
            </div>

            <div class="input-group">
                <!-- Grupo de campo de entrada para email -->
                <label for="emp-email">Correo Electrónico</label>
                <!-- Etiqueta del campo -->
                <input type="email" id="emp-email" name="email" required>
                <!-- Campo de entrada para email -->
            </div>

            <div class="input-group">
                <!-- Grupo de campo de entrada para contraseña -->
                <label for="emp-password">Contraseña</label>
                <!-- Etiqueta del campo -->
                <div class="password-container">
                    <!-- Contenedor especial para el campo de contraseña -->
                    <input type="password" id="emp-password" name="clave" required>
                    <!-- Campo de entrada para contraseña -->
                    <button type="button" class="toggle-password" onclick="togglePassword()">
                        <!-- Botón para mostrar/ocultar contraseña -->
                        <i class="fas fa-eye"></i>
                        <!-- Ícono de ojo de Font Awesome -->
                    </button>
                </div>
            </div>

            <div class="input-group">
                <!-- Grupo de campo de entrada para confirmar contraseña -->
                <label for="emp-confirm-password">Confirmar Contraseña</label>
                <!-- Etiqueta del campo -->
                <div class="password-container">
                    <!-- Contenedor especial para el campo de confirmación -->
                    <input type="password" id="emp-confirm-password" name="confirm-password" required>
                    <!-- Campo de entrada para confirmar contraseña -->
                    <button type="button" class="toggle-password" onclick="toggleConfirmPassword()">
                        <!-- Botón para mostrar/ocultar confirmación -->
                        <i class="fas fa-eye"></i>
                        <!-- Ícono de ojo de Font Awesome -->
                    </button>
                </div>
            </div>

            <div class="input-group">
                <!-- Grupo de campo de entrada para teléfono -->
                <label for="emp-telefono">Teléfono</label>
                <!-- Etiqueta del campo -->
                <input type="tel" id="emp-telefono" name="telefono" required>
                <!-- Campo de entrada para teléfono -->
            </div>

            <div class="input-group">
                <!-- Grupo de campo de entrada para zona de trabajo -->
                <label for="emp-experiencia">Zona de trabajo</label>
                <!-- Etiqueta del campo -->
                <input type="text" id="emp-zona" name="zona_trabajo" required>
                <!-- Campo de entrada numérico para experiencia -->
            </div>

            <div class="input-group">
                <!-- Grupo de campo de entrada para experiencia -->
                <label for="emp-experiencia">Años de Experiencia</label>
                <!-- Etiqueta del campo -->
                <input type="number" id="emp-experiencia" name="experiencia" min="0" required>
                <!-- Campo de entrada numérico para experiencia -->
            </div>

            <div class="trabajos-container">
                <!-- Contenedor para la selección de trabajos -->
                <label>Selecciona tus trabajos</label>
                <!-- Etiqueta para la selección de trabajos -->
                <div class="trabajos-grid">
                    <!-- Grid para los trabajos disponibles -->
                    <div class="trabajo-option" onclick="toggleTrabajo(this)">
                        <!-- Opción de trabajo: Carpintería -->
                        <input type="checkbox" name="trabajos" value="carpinteria" id="trabajo-carpinteria">
                        <i class="fas fa-hammer"></i>
                        <span>Carpintería</span>
                    </div>
                    <div class="trabajo-option" onclick="toggleTrabajo(this)">
                        <!-- Opción de trabajo: Plomería -->
                        <input type="checkbox" name="trabajos" value="plomeria" id="trabajo-plomeria">
                        <i class="fas fa-wrench"></i>
                        <span>Plomería</span>
                    </div>
                    <div class="trabajo-option" onclick="toggleTrabajo(this)">
                        <!-- Opción de trabajo: Educación -->
                        <input type="checkbox" name="trabajos" value="educacion" id="trabajo-educacion">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <span>Educación</span>
                    </div>
                    <div class="trabajo-option" onclick="toggleTrabajo(this)">
                        <!-- Opción de trabajo: Electricidad -->
                        <input type="checkbox" name="trabajos" value="electricidad" id="trabajo-electricidad">
                        <i class="fas fa-bolt"></i>
                        <span>Electricidad</span>
                    </div>
                    <div class="trabajo-option" onclick="toggleTrabajo(this)">
                        <!-- Opción de trabajo: Jardinería -->
                        <input type="checkbox" name="trabajos" value="jardineria" id="trabajo-jardineria">
                        <i class="fas fa-leaf"></i>
                        <span>Jardinería</span>
                    </div>
                    <div class="trabajo-option" onclick="toggleTrabajo(this)">
                        <!-- Opción de trabajo: Pintura -->
                        <input type="checkbox" name="trabajos" value="pintura" id="trabajo-pintura">
                        <i class="fas fa-paint-roller"></i>
                        <span>Pintura</span>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <!-- Grupo de campo de entrada para documentación -->
                <label for="emp-documentacion">Documentación (Títulos, Matrícula, etc.)</label>
                <!-- Etiqueta del campo -->
                <input type="file" id="emp-documentacion" name="documentacion" multiple accept=".pdf,.jpg,.jpeg,.png">
                <!-- Campo de entrada para archivos -->
                <small class="file-hint">Formatos aceptados: PDF, JPG, JPEG, PNG. Puedes subir varios archivos.</small>
            </div>

            <button type="submit">Registrarse</button>
            <!-- Botón para enviar el formulario -->
        </form>

        <div id="message" class="message"></div>
        <!-- Contenedor para mensajes del sistema -->
    </div>

    <script>
        // Función para validar el formulario
        function validateForm() {
            // Obtiene los valores de los campos
            const password = document.getElementById('emp-password').value;
            const confirmPassword = document.getElementById('emp-confirm-password').value;
            const messageDiv = document.getElementById('message');
            
            // Verifica si se ha seleccionado al menos un trabajo
            const trabajosSeleccionados = document.querySelectorAll('input[name="trabajos"]:checked');
            if (trabajosSeleccionados.length === 0) {
                messageDiv.textContent = 'Por favor, selecciona al menos un trabajo';
                return false;
            }

            // Verifica si las contraseñas coinciden
            if (password !== confirmPassword) {
                messageDiv.textContent = 'Las contraseñas no coinciden';
                return false;
            }

            // Si todo está correcto, muestra mensaje de éxito
            messageDiv.textContent = 'Registro exitoso';
            return true;
        }

        // Función para mostrar/ocultar contraseña principal
        function togglePassword() {
            const passwordInput = document.getElementById('emp-password');
            const icon = document.querySelector('.toggle-password i');
            
            // Cambia el tipo de input y el ícono
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Función para mostrar/ocultar confirmación de contraseña
        function toggleConfirmPassword() {
            const confirmPasswordInput = document.getElementById('emp-confirm-password');
            const icon = document.querySelectorAll('.toggle-password i')[1];
            
            // Cambia el tipo de input y el ícono
            if (confirmPasswordInput.type === 'password') {
                confirmPasswordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                confirmPasswordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
        
        // Función para alternar la selección de un trabajo
        function toggleTrabajo(elemento) {
            const checkbox = elemento.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            
            // Actualiza la apariencia visual
            if (checkbox.checked) {
                elemento.classList.add('selected');
            } else {
                elemento.classList.remove('selected');
            }
        }
    </script>
</body>
</html>